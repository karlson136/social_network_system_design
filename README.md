# social_network_system_design

### Функциональные требования:
- Пользователи могут опубликовать пост о путешествии с описанием и геометкой (из справочника)
- Пользователи могут добавить несколько фото к посту
- Пользователи могут подписаться на (отписаться от) путешественников
- пользователи могут оставлять комментарии под постами
- Пользователи могут оценивать посты
- Пользователи могут получать уведомления о новых постах путешественников, на которых они подписаны
- Пользователи могут просматривать ленты других путешественников
- Пользователи могут просматривать свою ленту, основанную на подписках пользователей
- Пользователи могут искать популярные места
- Пользователи могут применить фильтр по стране для поиска популярных мест
- Посты хранится вечно


### Нефункциональные требования:
- DAU 10 000 000
- Количество пользователей пишущих посты 1 000 000
- Посты хранятся вечно
- Территория СНГ
- Доступность 99,99%
- Лента подгружается пачками по 10 постов
- Активность пользователей:
    - Писатели в среднем создают 2 поста в месяц
    - Каждый пост содержит в среднем 10 фото
    - Пользователи в среднем просматривают ленту 3 раза в день
    - Пользователи в среднем просматривают 2 страницы за раз
    - Пользователи в среднем оставляют 5 комментариев в день
    - Каждый пост в среднем содержит 200 комментариев
    - Каждый пользователь в среднем просматривает комментарии у 10 постов
    - Пользователи в среднем ставят по 15 оценок в день
    - Пользователи в среднем подписаны на 50 писателей
- Лимиты:
    - К посту можно прикрепить до 25 фото
    - Размер фото не должен превышать 1Mb
    - Можно опубликовать не более чем один пост в сутки
    - У поста может быть не более чем 1 000 комментариев
    - Можно подписаться не более чем на 1 000 писателей
- Тайминги:
    - Создание поста - 3s
    - Публикация поста - 1h (премодерация + обработка фото и загрузка фото)
    - Добавление комментария - <1s
    - Подписка на путешественника - <1s
    - Оценка поста - <1s
    - Загрузка (подгрузка) ленты - 1s
    - Поиск постов - 2s
    - Уведомление о выходе поста путешественника - 1m 

### Нагрузка
- Посты(write):
    - (1 000 000 * 2 * 12) / 365 / 86400 = 0.7 RPS
- Посты(read):
    - (10 000 000 * 3 * 2) / 86400 = 694 RPS


- Комментарии(write):
    - (10 000 000 * 5) / 86400 = 579 RPS
- Комментарии(read):
    - (10 000 000 * 10) / 86400 = 1157 RPS


- Рейтинг(write):
    - (10 000 000 * 15) / 86400 = 1736 RPS
- Рейтинг(read):
    - (10 000 000 * 3 * 2) / 86400 = 694 RPS

### Данные
  - Пост
    - id - 8b
    - author_id - 8b
    - geo_id = 8b
    - title - 200b
    - description - 5000b
    - created_at - 8b
      - total: 8 + 8 + 8 + 200 + 5000 + 8 = 5232b ~ 5Kb
  - Комментарий
    - id - 8b
    - author_id - 8b
    - post_id - 8b
    - comment - 500b
    - created_at - 8b
      - total: 8 + 8 + 8 + 200 + 8 = 532b ~ 0.5Kb
  - Оценка
    - id - 8b
    - author_id - 8b
    - post_id - 8b
    - rate - 8b
    - created_at - 8b
      - total: 8 + 8 + 8 + 8 + 8 = 40b

### Траффик
- Посты(write):
  - 0.7RPS * 5Kb = 3.5Kb/s
- Посты(read):
  - 694RPS * 5Kb * 10 = 34700Kb/s ~ 34Mb/s

- Фото(write):
  - 0.7RPS * 1Mb * 10 = 7Mb/s
- Фото(read):
  - 694RPS * 1Mb * 10 * 10 = 69400Mb/s ~ 69Gb/s


- Комментарии(write):
  - 579RPS * 0.5Kb = 290Kb/s
- Комментарии(read):
  - 1157RPS * 0.5Kb * 200 = 115700Kb ~ 115Mb/s


- Рейтинг(write):
  - 1736RPS * 40b = 69440b ~ 69Kb/s 
- Рейтинг(read):
  - 694RPS * 40b * 10 = 277600b/s ~ 270Kb/s




